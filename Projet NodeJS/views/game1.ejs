<!DOCTYPE html>
<html>
<head><title>Random game</title></head>
<script type="text/javascript">
  init = function(){
    score = document.getElementById("score");
    console.log(score);
  }
  play = function(){
    //console.log("score"+score.value);
    let random = Math.floor(Math.random() * Math.floor(100)); // random integer between 0 and 100
    if(random > score.value){
      score.value = random;
    }
    if(confirm(random)){ // when ok button is clicked, the score on the web page is refreshed
      reload();
    }
  }
  reload = function(){ // updates the content of the dom element with the id userscore
    var div = document.getElementById("userscore");
    var content = "Your score : "+score.value;
    div.innerHTML= content;
  }
</script>
<body onload='init()'>
<h1>Welcome <%= username %> to the random game !</h1> <!-- gets the username and the score from the post method in chooseGame -->
<h2 id = "userscore">Your score : <%= score %></h2>
<button onclick="play()" >Play</button> <!-- button runs javascript function play when clicked-->
<form action = "/backMenu" method = "post">
  <input type = "submit" value = "Save score and go back to menu"> <!-- button that resend to the chooseGame page along with the username and his score-->
  <input type = "hidden" id = "name" name = "name" value = "<%= username %>">
  <input type = "hidden" id = "score" name = "score" value = "<%= score %>">
</form>
<div>
		Scoreboard
		<table border = "1">
				<tr><th>Rank</th><th>Pseudo</th><th>Score</th></tr>
        <% for(var i=0; i < usersList.length; i++) { %>
			<tr>
        <td><%=usersList[i].rank%></td>
        <td><%=usersList[i].login%></td>
        <td><%=usersList[i].score%></td>
      </tr>
			<% } %>
		</table>
</div>
</body>
</html>
